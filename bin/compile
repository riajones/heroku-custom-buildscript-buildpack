#!/usr/bin/env bash

BUILD_DIR=${1:-}
CACHE_DIR=${2:-}
ENV_DIR=${3:-}

echo 'Starting Custom Build'
echo 'Environment'
printenv
echo ''

echo 'current directory'
ls
echo ''

echo 'ENV_DIR'
ls $ENV_DIR
echo ''

echo 'BUILD_DIR'
echo $BUILD_DIR
ls $BUILD_DIR
echo ''

if [ -f $ENV_DIR/BUILD_SCRIPT ]; then
  BUILD_SCRIPT=`cat $ENV_DIR/BUILD_SCRIPT`
  echo $BUILD_DIR
  echo $BUILD_SCRIPT
  if [ -f $BUILD_DIR/$BUILD_SCRIPT ]; then
    ./$ENV_DIR/$BUILD_SCRIPT
    exit 0
  fi
fi

echo 'Script does not exist'
exit 1
